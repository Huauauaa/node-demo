(this["webpackJsonpname-marker"]=this["webpackJsonpname-marker"]||[]).push([[0],{183:function(e,t){},222:function(e,t,n){},223:function(e,t,n){},224:function(e,t,n){},338:function(e,t,n){},385:function(e,t){},386:function(e,t){},389:function(e,t,n){},391:function(e,t,n){"use strict";n.r(t);var a=n(9),c=n(0),r=n.n(c),i=n(25),s=n.n(i),o=(n(222),n(43)),l=n(56),u=(n(223),r.a.createContext({data:[],setData:function(e){}})),j=n(83),d=n(408),b=n(409),O=n(206),f=n(32),m=n(400),p=n(401),x=n(402),h=n(395),y=n(404),v=n(405);n(224);var g=function(e){var t=e.onDelete,n=e.onEdit,r=Object(c.useContext)(u).data,i=[{title:"\u5e8f\u53f7",dataIndex:"index",key:"index"},{title:"\u59d3\u540d",dataIndex:"name",key:"name"},{title:"\u62fc\u97f3",dataIndex:"pinyins",key:"pinyins",render:function(e){return e.map((function(e,t){return Object(a.jsx)(m.a,{children:e},t)}))}},{title:"\u64cd\u4f5c",key:"action",render:function(e,c){return Object(a.jsxs)(p.b,{size:"middle",children:[Object(a.jsx)(y.a,{className:"action-item",onClick:function(){return n(c)}}),Object(a.jsx)(x.a,{title:"\u786e\u8ba4\u5220\u9664?",onConfirm:function(){return t(c.key)},onCancel:function(){},okText:"\u662f",cancelText:"\u5426",children:Object(a.jsx)(v.a,{className:"action-item",style:{color:"red"}})})]})}}];return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(h.a,{dataSource:r.map((function(e,t){return Object(o.a)(Object(o.a)({},e),{},{index:t+1})})),columns:i,pagination:{showTotal:function(e){return"\u5171 ".concat(e," \u9879")}}})})},k=n(398),S=n(403),I=n(94),C=n.n(I),w=(n(338),n(198)),F=n.n(w).a.create({baseURL:"./api",timeout:6e4});F.interceptors.response.use((function(e){return e.data}),(function(e){var t=e.response;return Promise.reject(t.data)}));var N=F,E=k.a.Search,T=n(147);var D=function(){var e=Object(c.useState)(""),t=Object(l.a)(e,2),n=t[0],r=t[1],i=Object(c.useState)([]),s=Object(l.a)(i,2),j=s[0],d=s[1],b=Object(c.useContext)(u).data,O=Object(c.useState)([]),f=Object(l.a)(O,2),p=f[0],x=f[1];Object(c.useEffect)((function(){if(n){var e=T(n,{style:T.STYLE_NORMAL});d(b.filter((function(t){return C.a.intersection(C.a.flatten(e),C.a.flatten(t.pinyins)).length>0})))}else d([])}),[n,b]);var y=[{title:"label",dataIndex:"label",key:"label",width:"100px"},{title:"content",dataIndex:"content",key:"content",render:function(e){return 1===e.length?Object(a.jsx)(m.a,{color:"blue",children:e}):Object(a.jsx)(S.b,{size:"small",bordered:!0,dataSource:e,renderItem:function(e){return Object(a.jsx)(S.b.Item,{children:e})}})}}];return Object(a.jsxs)("div",{className:"home-wrapper",children:[Object(a.jsx)(E,{placeholder:"\u8bf7\u8f93\u5165\u59d3\u540d",allowClear:!0,enterButton:"\u68c0\u6d4b",size:"large",onSearch:function(e){N.get("/word",{params:{wd:e,t:Date.now()}}).then((function(t){x(t),r(e)}))}}),Object(a.jsx)("div",{className:"search-result",children:j.map((function(e){return e.name})).join(", ")}),Object(a.jsx)(h.a,{dataSource:p.map((function(e,t){return Object(o.a)(Object(o.a)({},e),{},{key:t})})),showHeader:!1,columns:y,pagination:!1})]})},L=n(41),M=n(136),R=n(154),V=n.n(R),A=n(202),B=n(396),J=n(397),P=n(126),_=n.n(P),z=n(147),Y={labelCol:{span:4},wrapperCol:{span:18}};var q=function(e){var t,n=e.isModalVisible,r=e.setIsModalVisible,i=e.nameInfo,s=e.type,j=B.a.useForm(),d=Object(l.a)(j,1)[0],b=Object(c.useContext)(u),O=b.data,f=b.setData;Object(c.useEffect)((function(){n&&d.resetFields()}),[d,n]);var m=function(){var e=Object(A.a)(V.a.mark((function e(){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.validateFields();case 2:d.submit(),r(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsx)(J.a,{title:"".concat("edit"===s?"\u7f16\u8f91":"\u6dfb\u52a0"),visible:n,onOk:m,onCancel:function(){r(!1)},destroyOnClose:!1,okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",children:Object(a.jsxs)(B.a,Object(o.a)(Object(o.a)({form:d,preserve:!1},Y),{},{name:"basic",onFinish:function(e){var t=Object.keys(e).filter((function(e){return e.startsWith("pinyin")}));if("edit"===s){var n=Object(o.a)(Object(o.a)({},i),{},{name:e.name,pinyins:t.map((function(t){return e[t]}))}),a=O.findIndex((function(e){return e.key===i.key}));f([].concat(Object(M.a)(O.slice(0,a)),[n],Object(M.a)(O.slice(a+1))))}else{var c={name:e.name,pinyins:z(e.name,{style:z.STYLE_NORMAL}),key:_()()};f([c].concat(Object(M.a)(O)))}},initialValues:{name:i.name,pinyins:i.pinyins},onFinishFailed:function(e){console.info("Failed:",e)},children:[Object(a.jsx)(B.a.Item,{label:"\u59d3\u540d",name:"name",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u59d3\u540d"}],children:Object(a.jsx)(k.a,{})}),null===(t=i.pinyins)||void 0===t?void 0:t.map((function(e,t){return Object(a.jsx)(B.a.Item,{label:"\u62fc\u97f3".concat(t+1),name:"pinyin".concat(t),initialValue:e,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u62fc\u97f3"}],children:Object(a.jsx)(k.a,{})},t)}))]}))})},H=n(214),K=n(406),U=n(155),W=n(399),G=n(147);var Q=function(){var e=Object(c.useContext)(u).setData;return Object(a.jsx)(W.a,{accept:".xlsx, .xls",onChange:function(t){for(var n=new FileReader,a=0;a<t.length;a++)n.name=t[a].name;n.readAsBinaryString(t[0]),n.onload=function(t){try{var n,a=[".xlsx",".xls"],c=null===t||void 0===t||null===(n=t.target)||void 0===n?void 0:n.name;if(null===c)throw Error("Empty");var r=c.substring(c.lastIndexOf("."));if(!a.includes(r))throw Error("Type Error: ".concat(a));var i=t.target.result,s=U.read(i,{type:"binary"}),l=[];for(var u in s.Sheets)s.Sheets.hasOwnProperty(u)&&(l=l.concat(U.utils.sheet_to_json(s.Sheets[u])));console.table(l);var j=l.map((function(e){return Object(o.a)(Object(o.a)({},e),{},{pinyins:G(e.name,{style:G.STYLE_NORMAL}),key:_()()})})),d=JSON.parse(localStorage.getItem("data")||"[]");e(C.a.unionBy(j,d,"name"))}catch(b){return void H.b.warn(b)}}},children:Object(a.jsx)(L.a,{type:"primary",icon:Object(a.jsx)(K.a,{}),children:"\u4e0a\u4f20"})})},X=(n(389),n(407));var Z=[{path:"/",name:"home",component:D},{path:"/dashboard",name:"dashboard",component:function(){var e=Object(c.useContext)(u),t=e.data,n=e.setData,r=Object(c.useState)(!1),i=Object(l.a)(r,2),s=i[0],o=i[1],j=Object(c.useState)({name:""}),d=Object(l.a)(j,2),b=d[0],O=d[1],f=Object(c.useState)(""),m=Object(l.a)(f,2),p=m[0],x=m[1];return Object(a.jsxs)("div",{className:"dashboard-wrapper",children:[Object(a.jsxs)("div",{className:"operations",children:[Object(a.jsx)(L.a,{type:"primary",icon:Object(a.jsx)(X.a,{}),onClick:function(){return o(!0),O({name:""}),void x("add")},children:"\u6dfb\u52a0"}),Object(a.jsx)(Q,{})]}),Object(a.jsx)("div",{className:"data-list",children:Object(a.jsx)(g,{onDelete:function(e){n(t.filter((function(t){return t.key!==e})))},onEdit:function(e){o(!0),O(e),x("edit")}})}),Object(a.jsx)(q,{isModalVisible:s,setIsModalVisible:o,nameInfo:b,type:p})]})}},{path:"/list",name:"list",component:g}];var $=function(){var e=Object(c.useRef)(null),t=JSON.parse(localStorage.getItem("data")||"[]"),n=Object(c.useState)(t),r=Object(l.a)(n,2),i=r[0],s=r[1];return Object(c.useEffect)((function(){localStorage.setItem("data",JSON.stringify(i))}),[i]),Object(a.jsx)("div",{className:"App",children:Object(a.jsx)(u.Provider,{value:{data:i,setData:s},children:Object(a.jsx)(O.a,{children:Object(a.jsx)(f.c,{children:Z.map((function(t){return Object(a.jsx)(f.a,{path:t.path,exact:!0,render:function(n){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(j.a,{onClick:function(e){return n.history.push("".concat(e.key))},selectedKeys:[n.location.pathname],mode:"horizontal",ref:e,children:[Object(a.jsx)(j.a.Item,{icon:Object(a.jsx)(d.a,{}),children:"\u9996\u9875"},"/"),Object(a.jsx)(j.a.Item,{icon:Object(a.jsx)(b.a,{}),children:"\u6570\u636e"},"/dashboard")]}),Object(a.jsx)(t.component,Object(o.a)({},n))]})}},t.name)}))})})})})},ee=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,410)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),r(e),i(e)}))};s.a.render(Object(a.jsx)($,{}),document.getElementById("root")),ee()}},[[391,1,2]]]);
//# sourceMappingURL=main.5c8b1e59.chunk.js.map